# 通常アイテム - 要件抽出

**対象アイテムタイプ**: 通常アイテム (Normal items)
**定義**: Aged Brie, Sulfuras, Backstage passes, Conjuredのいずれにも該当しないアイテム

## 出典

GildedRoseRequirements_jp.md

## 抽出された要件

### 1. 基本ルール（全アイテム共通）

以下のルールは通常アイテムにも適用されます：

#### 1.1 アイテムの属性
- すべてのアイテムには**SellIn値**（販売期限の残り日数）がある
- すべてのアイテムには**Quality値**（品質・価値）がある

#### 1.2 毎日の更新
- 毎日の終わりに、システムは両方の値を1小さくする

#### 1.3 品質の制約
- **Quality値は決してマイナスにはならない**（下限: 0）
- **Quality値は50以上にはならない**（上限: 50）

### 2. 通常アイテム固有のルール

通常アイテムは、特殊アイテムの例外ルールが適用されない、デフォルトの振る舞いをするアイテムです。

#### 2.1 販売期限内の振る舞い (SellIn >= 0)
- 毎日、**SellIn値が1減少**する
- 毎日、**Quality値が1減少**する
- Quality値は0未満にはならない（下限制約）

#### 2.2 販売期限切れ後の振る舞い (SellIn < 0)
- 毎日、**SellIn値が1減少**する（継続）
- 毎日、**Quality値が2減少**する（劣化速度が2倍）
  - 要件原文: 「販売するための残り日数が無くなると、Quality値は2小さくなります」
- Quality値は0未満にはならない（下限制約）

### 3. 要件からの推論

#### 3.1 初期状態
- 要件では初期状態についての明示的な記述なし
- 任意のSellIn値とQuality値（0-50の範囲）でアイテムが作成可能と推定

#### 3.2 エッジケース候補
- Quality = 0 のときの減少処理
- Quality = 1 で SellIn < 0 のときの減少処理（2減少 → 0で停止）
- SellIn = 0 の境界（この日は1減少か2減少か？）
- 負のSellInの継続的な減少

### 4. 未明記の事項・曖昧な点

#### 4.1 SellIn = 0 の日の扱い
- 要件: 「販売するための残り日数が**無くなると**」
- 解釈の余地:
  - 解釈A: SellIn = 0 の日は「まだ残り日数がある」→ Quality -1
  - 解釈B: SellIn = 0 の日は「残り日数が無い」→ Quality -2
- **既存コード分析で確認が必要**

#### 4.2 SellIn値の下限
- Quality値には明示的な下限（0）があるが、SellIn値の下限は未記載
- 負の値がどこまで減少し続けるかは不明
- **既存コード分析で確認が必要**

## まとめ

通常アイテムの要件は比較的シンプルです：
- 毎日、SellInとQualityが減少する
- 販売期限切れ後は品質劣化が2倍速になる
- 品質は0以上50以下の範囲に制約される

ただし、**SellIn = 0 の境界条件**については要件文書からは明確でないため、既存コードの振る舞いを分析して「実際の仕様」を確定する必要があります。
